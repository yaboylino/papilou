import React, { useState } from "react"
import axios from "axios"
import { useSelector } from "react-redux"
import { useRouter } from "next/router"

const Paypal = () => {
  const router = useRouter()
  const klantgegevens = useSelector(state => state.mand.klantgegevens)

  const [gegevens, setGegevens] = useState({
    voornaam: klantgegevens.voornaam,
    achternaam: klantgegevens.achternaam,
    straatnaam: klantgegevens.straatnaam,
    huisnummer: klantgegevens.huisnummer,
    plaats: klantgegevens.plaats,
    provincie: klantgegevens.provincie,
    postcode: klantgegevens.postcode,
    telefoon: klantgegevens.telefoon,
    land: klantgegevens.land,
    email: klantgegevens.email,
    totaal: klantgegevens.totaal,
    artikelen: klantgegevens.artikelen,
    method: "paypal"
  })
  const handleSubmit = e => {
    e.preventDefault()
    axios
      .post("/api/betaling/", {
        method: "POST",
        headers: {
          "Access-Control-Allow-Origin": "*",
          "Content-Type": "application/json"
        },
        body: gegevens
      })
      .then(response => {
        console.log(response.data)
        if (response.data._links.checkout.href) {
          router.push(response.data._links.checkout.href)
        }
      })
  }
  return (
    <svg onClick={e => handleSubmit(e)} className="w-full h-full" viewBox="0 0 32 32">
      <g fill="none" fill-rule="evenodd">
        <rect width="32" height="32" fill="#FFF" rx="10"></rect>
        <path fill="#D9D9D9" fill-rule="nonzero" d="M1,7.99240541 L1,24.0075946 C1,27.8698134 4.13036543,31 7.99240541,31 L24.0075946,31 C27.8698134,31 31,27.8696346 31,24.0075946 L31,7.99240541 C31,4.13018659 27.8696346,1 24.0075946,1 L7.99240541,1 C4.13018659,1 1,4.13036543 1,7.99240541 Z M0,7.99240541 C0,3.57832179 3.57766074,0 7.99240541,0 L24.0075946,0 C28.4216782,0 32,3.57766074 32,7.99240541 L32,24.0075946 C32,28.4216782 28.4223393,32 24.0075946,32 L7.99240541,32 C3.57832179,32 0,28.4223393 0,24.0075946 L0,7.99240541 Z"></path>
        <path fill="#009DDD" fill-rule="nonzero" d="M22.1882692,11.3870968 L22.1882692,11.3870968 L22.1882692,11.3870968 C22.1721154,11.4932101 22.1536538,11.6016946 22.1328846,11.7131433 C21.4192307,15.478091 18.9776923,16.7787201 15.8594231,16.7787201 L14.2717307,16.7787201 C13.8903846,16.7787201 13.5690384,17.0632697 13.5096154,17.449783 L13.5096154,17.449783 L13.5096154,17.449783 L12.6967307,22.7471492 L12.4665384,24.2487415 C12.4278846,24.502465 12.6182692,24.7312903 12.8675,24.7312903 L15.6834615,24.7312903 C16.0169231,24.7312903 16.3001923,24.4823094 16.3526923,24.1444066 L16.3803846,23.9973893 L16.9105769,20.5401109 L16.9446154,20.3504111 C16.9965384,20.0113228 17.2803846,19.7623418 17.6138461,19.7623418 L18.035,19.7623418 C20.7632692,19.7623418 22.8990384,18.6241432 23.5232692,15.3304808 C23.7840384,13.9545647 23.6490384,12.8056954 22.9590384,11.9976929 C22.7501923,11.7540473 22.4911538,11.5518985 22.1882692,11.3870968 Z"></path>
        <path fill="#202C69" fill-rule="nonzero" d="M21.4482461,10.0388218 C21.3247107,9.9975166 21.1972536,9.95996644 21.0665283,9.92617129 C20.9351494,9.89312715 20.8005024,9.86383803 20.6619337,9.83830392 C20.176943,9.74818353 19.6455448,9.70537634 19.0762363,9.70537634 L14.270776,9.70537634 C14.1524696,9.70537634 14.0400459,9.73616748 13.9393875,9.79174172 C13.7178082,9.91415524 13.5530943,10.1552273 13.5132231,10.4503715 L12.4909516,17.8898095 L12.4615385,18.1068495 C12.528862,17.6171954 12.8929318,17.2567138 13.3249788,17.2567138 L15.1237583,17.2567138 C18.6566083,17.2567138 21.4227546,15.6082617 22.2312903,10.8393912 C22.2554745,10.6982026 22.2757369,10.560769 22.2940385,10.4263394 C22.0894534,10.3016729 21.8678741,10.1950304 21.6293005,10.1041591 C21.5704742,10.081629 21.5096869,10.0598499 21.4482461,10.0388218 Z"></path>
        <path fill="#1F3A85" fill-rule="nonzero" d="M14.546532,11.2220323 C14.5817243,11.0065161 14.7271089,10.8304839 14.9226859,10.7416452 C15.0121089,10.7010645 15.1107628,10.6785806 15.2151859,10.6785806 L19.4567243,10.6785806 C19.9592243,10.6785806 20.4282628,10.7098387 20.8563397,10.7756452 C20.9786474,10.7942903 21.0974936,10.8156774 21.2134551,10.8398065 C21.3288397,10.8644839 21.4413397,10.8919032 21.5503782,10.9220645 C21.6046089,10.9374194 21.6582628,10.9533226 21.7107628,10.9692258 C21.9213397,11.0355806 22.1169166,11.114 22.2974936,11.2044839 C22.5098012,9.91741935 22.2957628,9.04109677 21.5636474,8.24758065 C20.756532,7.374 19.2998012,7 17.4357628,7 L12.0242243,7 C11.6434551,7 11.3186474,7.26322581 11.2598012,7.62132258 L9.00576278,21.202129 C8.96133971,21.4708387 9.17941663,21.7132258 9.46441663,21.7132258 L12.8053782,21.7132258 L13.6442243,16.6543548 L14.546532,11.2220323 Z"></path>
      </g>
    </svg>
  )
}

export default Paypal
